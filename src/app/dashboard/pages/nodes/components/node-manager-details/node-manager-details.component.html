<ng-container *ngIf="infoCoreVersion$ | async as nodeCoreVersion; else loading">
  <nz-descriptions
    [nzTitle]="nodeManagerTitle"
    nzBordered
    [nzColumn]="descriptionColumns"
  >
    <nz-descriptions-item nzTitle="Version">
      {{ nodeCoreVersion?.currentVersion }}
    </nz-descriptions-item>
    <nz-descriptions-item nzTitle="Latest version">
      {{ nodeCoreVersion?.latestVersion }}
    </nz-descriptions-item>

    <ng-container *ngIf="blockchainHeight$ | async as blockchainHeight">
      <nz-descriptions-item nzTitle="Height">
        <app-text-animate [value]="blockchainHeight?.height"></app-text-animate>
      </nz-descriptions-item>
    </ng-container>

    <ng-container *ngIf="infoNextForgingSlot$ | async as infoNextForgingSlot">
      <nz-descriptions-item nzTitle="Next slot in(ms)">
        <app-text-animate
          [value]="infoNextForgingSlot?.remainingTime"
        ></app-text-animate>
      </nz-descriptions-item>
    </ng-container>
  </nz-descriptions>
</ng-container>

<nz-divider nzText="Logs"></nz-divider>
<app-log-archived-table [rows]="logArchived$"></app-log-archived-table>

<nz-divider nzText="Processes"></nz-divider>
<app-process-list-table [rows]="processList$"></app-process-list-table>

<ng-template #nodeManagerTitle>
  <nz-space nzDirection="horizontal" nzSize="middle">
    <nz-space-item>
      <span
        >Node manager @ <a>{{ nodeManagerUrl$ | async }}</a></span
      >
    </nz-space-item>

    <nz-space-item>
      <ng-container *ngIf="infoCoreStatus$ | async as infoCoreStatus">
        <nz-badge
          [nzStatus]="
            infoCoreStatus?.processStatus === 'online' ? 'success' : 'error'
          "
          [nzText]="'Core ' + transformText(infoCoreStatus?.processStatus)"
        ></nz-badge>
      </ng-container>
    </nz-space-item>

    <nz-space-item>
      <ng-container *ngIf="infoCoreStatus$ | async as infoCoreStatus">
        <nz-badge
          [nzStatus]="infoCoreStatus?.syncing ? 'success' : 'error'"
          [nzText]="
            'Core ' + (infoCoreStatus?.syncing ? 'syncing' : 'not syncing')
          "
        ></nz-badge>
      </ng-container>
    </nz-space-item>
  </nz-space>
</ng-template>

<ng-template #loading>
  <nz-spin nzSimple></nz-spin>
</ng-template>
