<form
  nz-form
  (ngSubmit)="createSnapshot($event)"
  [formGroup]="snapshotForm"
  nzLayout="vertical"
  novalidate
>
  <nz-form-item>
    <app-form-label>
      <nz-form-label nzFor="codec" nzRequired>Codec</nz-form-label>
    </app-form-label>
    <nz-form-control nzErrorTip="Please enter codec!">
      <input
        id="codec"
        type="text"
        nz-input
        formControlName="codec"
        placeholder="Codec"
      />
    </nz-form-control>
  </nz-form-item>

  <nz-form-item>
    <app-form-label>
      <nz-form-label nzFor="start">Start</nz-form-label>
    </app-form-label>
    <nz-form-control nzErrorTip="Start should be a valid integer!">
      <input
        id="start"
        type="number"
        nz-input
        formControlName="start"
        placeholder="Start"
      />
    </nz-form-control>
  </nz-form-item>

  <nz-form-item>
    <app-form-label>
      <nz-form-label nzFor="end">End</nz-form-label>
    </app-form-label>
    <nz-form-control nzErrorTip="End should be a valid integer!">
      <input
        id="end"
        type="number"
        nz-input
        formControlName="end"
        placeholder="End"
      />
    </nz-form-control>
  </nz-form-item>

  <nz-form-item>
    <nz-form-control>
      <label nz-checkbox formControlName="skipCompression">
        <span nz-typography>Skip compression</span>
      </label>
    </nz-form-control>
  </nz-form-item>
</form>

<ng-template #modalTitleTpl>
  <app-modal-header>
    <h4 nz-typography nzType="secondary">
      Create snapshot
    </h4>
  </app-modal-header>
</ng-template>

<div *nzModalFooter>
  <ng-container *ngLet="isLoading$ | async as isLoading">
    <button
      nz-button
      class="submit-btn"
      nzType="primary"
      [nzLoading]="isLoading"
      [disabled]="isLoading || ((isFormDirty$ | async) && !snapshotForm.valid)"
      (click)="createSnapshot($event)"
    >
      Create
    </button>
  </ng-container>
</div>
